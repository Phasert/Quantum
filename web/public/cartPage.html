<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <!-- Link to your CSS file if you have one -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arima:wght@100&family=Baskervville&family=Bodoni+Moda:ital,opsz@1,6..96&family=Castoro&family=Cinzel&family=Diphylleia&family=Forum&family=Gilda+Display&family=Krub:ital,wght@1,200&family=Manrope:wght@200&family=Playfair:ital,opsz,wght@1,5..1200,300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arima:wght@100&family=Baskervville&family=Bodoni+Moda:ital,opsz@1,6..96&family=Castoro&family=Cinzel&family=Diphylleia&family=Forum&family=Gilda+Display&family=IM+Fell+French+Canon&family=Krub:ital,wght@1,200&family=Manrope:wght@200&family=Playfair:ital,opsz,wght@1,5..1200,300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

</head>
<body style="background-color: #EFEBE5;">

    <!-- Your HTML content goes here -->
    <header>
        <div class="header2-container">
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="catalogue.html">Catalogue</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="cartPage.html">Cart</a></li>
                    <li><a href="#" id="loginLink">Log In</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="popup-container" id="popupContainer">
        <div class="popup-content">
            <!-- Add close button -->
            <div class="close-button" id="closeButton">X</div>
  
            <div class="container" id="container">
                <!-- Copy the content of your existing popup here -->
                <div class="form-container sign-up-container">
                  <form action="/signup" method="post">
                    <h1>Sign Up</h1>
                    <input type="text" name="firstName" placeholder="First Name" />
                    <input type="text" name="lastName" placeholder="Last Name" />
                    <input type="email" name="email" placeholder="example@example.com" />
                    <input type="tel" name="phone" placeholder="(868)-123-4567 " />
                    <input type="password" id="password" name="password" placeholder="Password" required>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm Password" required>
                    <button type="submit">Sign Up</button>
                  </form>
                  
                </div>
                <div class="form-container sign-in-container">
                  <form action="/login" method="post">
                    <h1>Sign in</h1>
                    <input type="text" name="loginId" placeholder="Login ID" required />
                    <input type="password" name="password" placeholder="Password" required />
                    <a href="#">Forgot your password?</a>
                    <button type="submit">Log In</button>
                </form>
                </div>
                <div class="overlay-container">
                    <div class="overlay">
                        <div class="overlay-panel overlay-left">
                            <h1>Welcome Back!</h1>
                            <p>To keep connected with us please login with your personal info</p>
                            <button class="ghost" id="signIn">Log In</button>
                        </div>
                        <div class="overlay-panel overlay-right">
                            <h1>Hello, Friend!</h1>
                            <p>Enter your personal details and start the journey with us</p>
                            <button class="ghost" id="signUp">Sign Up</button>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
    </div>
    <section class="shoppingCart">
        <h2>Your Shopping Cart</h2>
    <div id="cartContent"></div>
    <section class="shoppingCart-info">
        <p>*The displayed cost estimate prices for items correspond to the rental duration in days.</p>
    </section>
    <div id="cartTotal"></div>
    </section>
    <div class="shoppingCart-Btn">
         <!-- Added "Proceed to Checkout" button with styling -->
         <button id="proceedToCheckout" onclick="proceedToCheckout" class="checkout-button">Proceed to Checkout</button>
         <a href="index.html" class="checkout-button" onclick="closeForm()">Close</a>
    </div>
  
   
    
    <script>
        var cart = []; // Initialize an empty cart array
    
        // Retrieve the cart data from sessionStorage
        var cart = JSON.parse(sessionStorage.getItem('cart')) || [];

        function displayCart() {
            var cartContent = document.getElementById('cartContent');
            var cartTotal = document.getElementById('cartTotal');
            var totalCost = 0;
    
            // Clear existing content
            cartContent.innerHTML = '';
    
            // Create a table to display cart items
            var table = document.createElement('table');
            table.innerHTML = '<tr><th>Item</th><th>Quantity</th><th>Cost Estimate</th><th>Comment</th><th>Rent Date</th><th>Rent Time</th><th>Return Date</th><th>Return Time</th></tr>';
    
            // Loop through cart items and add rows to the table
            for (var i = 0; i < cart.length; i++) {
                var item = cart[i];
                var row = table.insertRow();
    
                // Populate the row with item information
                row.insertCell(0).textContent = item.option;
                row.insertCell(1).textContent = item.quantity;
                row.insertCell(2).textContent = '$' + item.costEstimate.toFixed(2);
                row.insertCell(3).textContent = item.comment;
                row.insertCell(4).textContent = item.rentDate;  // Format the rent date
                row.insertCell(5).textContent = item.rentTime;
                row.insertCell(6).textContent = item.returnDate;  // Format the return date
                row.insertCell(7).textContent = item.returnTime;
                
                // Add a delete button to each row
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Remove';
                deleteButton.className = 'remove-button'; // Add the class to the delete button
                deleteButton.onclick = createRemoveItemHandler(i); // Assign a function to handle deletion
                row.insertCell(8).appendChild(deleteButton);

                var rentStart = new Date(item.rentDate + ' ' + item.rentTime);
                var rentEnd = new Date(item.returnDate + ' ' + item.returnTime);
                var durationInDays = Math.max(1, Math.ceil((rentEnd - rentStart) / (24 * 60 * 60 * 1000))); // Calculate duration in days

                // Update the cost estimate based on the number of days
                var updatedCost = item.costEstimate * durationInDays;

                row.cells[2].textContent = '$' + updatedCost.toFixed(2);

                totalCost += updatedCost;
            }
    
            // Append the table to the cart content
            cartContent.appendChild(table);
    
            // Display the total cost
            cartTotal.innerHTML = '<p>Cart Total: $' + totalCost.toFixed(2) + '</p>';
        }
       
        
        // Function to create a closure for the remove item handler
    function createRemoveItemHandler(index) {
        return function () {
            removeItem(index);
        };
    }

    function removeItem(index) {
        // Remove the item from the cart array
        cart.splice(index, 1);

        // Update the cart display
        displayCart();

        // Save the updated cart to sessionStorage
        sessionStorage.setItem('cart', JSON.stringify(cart));
    }
       // Function to proceed to checkout
       function proceedToCheckout() {
            // Add your checkout logic here
            alert('Proceeding to Checkout. Add your logic here.');
        }
    
        // Call the displayCart function when the page loads to show the initial cart content
        displayCart();
    </script>
    <script src="app.js"></script>
    <script src="https://kit.fontawesome.com/ece7d978a6.js" crossorigin="anonymous"></script>
    

</body>
</html>
